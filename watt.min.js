/**
* watt Library v0.9.0 https://github.com/wanghetommy/watt/
* @date 2014-01-02 11:20
* @author taylor wong
* @Copyright 2013 wanghetommy@gmail.com Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
*/;
!function(a){function b(a){for(var b=c,d=0;d<a.length;d++)b=b[a[d]]=b[a[d]]||{};return b}var c={version:.1};c.apply=function(a,b){if(a&&b&&"object"==typeof b)for(var c in b)"undefined"!=typeof b[c]&&(a[c]=b[c]);return a},c.ns=function(a,d){var e="string"==typeof a?b(a.split(".")):c;return c.apply(e,a),d&&"function"==typeof d&&(d=d.apply(e,[c])),c.apply(e,d)},c.WVS={},a.watt=c}(window),watt.ns("bus",function(a){a.WVS.BUS={};var b=function(b){return this.ns=b||this._DEF_NAMESPACE,this.events={},a.WVS.BUS[this.ns]?a.WVS.BUS[this.ns]:(a.WVS.BUS[this.ns]=this,this)};b.prototype={_DEF_NAMESPACE:"_defaultNS",on:function(a,b){var c,d=a.split(/\s+/);if(b&&"function"==typeof b)for(;c=d.shift();)(this.events[c]||(this.events[c]=[])).push(b);return this},off:function(a,b){if(a||b){for(var c,d,e=a.split(/\s+/);c=e.shift();)if(d=this.events[c])if(b)for(var f=d.length-1;f>=0;f--)d[f]===b&&d.splice(f,1);else delete this.events[c]}else this.events={};return this},one:function(a,b){var c=this,d=function(){c.off(a,d),b.apply(this,arguments)};this.on(a,d)},emit:function(a,b,c){for(var d,e,f,g=a.split(/\s+/);d=g.shift();)for(e=(this.events[d]||[]).slice();f=e.shift();)try{f.apply(c||this,b||[])}catch(h){this.emit("error",[h],this)}return this}};var c=function(b,c){4==b.length?"string"!=typeof b[1]&&(b[3]=b[2],b[2]=b[1],b[1]=b[0],b[0]=a.bus.Bus._DEF_NAMESPACE):"function"==typeof b[1]&&(b[2]=b[1],b[1]=b[0],b[0]=a.bus.Bus._DEF_NAMESPACE);for(var d,e,f=b.shift().split(/\s+/g);d=f.shift();)e=a.WVS.BUS[d||a.bus.Bus._DEF_NAMESPACE],e&&e[c].apply(e,b)};return a.ns({on:function(a,b,d){return c([a,b,d],"on"),this},off:function(a,b,d){return c([a,b,d],"off"),this},one:function(a,b,d){return c([a,b,d],"one"),this},emit:function(a,b,d,e){return c([a,b,d,e],"emit"),this},Bus:function(b){new a.bus.Bus(b)}},0),{Bus:new b}}),watt.ns("mvp",function(a){var b=function(b,c,d,e){if(("function"==typeof c||"object"==typeof c)&&(e=d,d=c,c=b,b=a.bus.Bus._DEF_NAMESPACE),"function"==typeof d&&(e=d),"function"!=typeof e)throw new Error("Handler is required in Presenter");a.apply(this,a.apply({once:!1},d));var f=this;a[this.once?"one":"on"](b,c,function(a,b){e.call(f,a,b)},this)};return b.prototype={render:function(){}},a.ns({Presenter:function(b,c,d,e){return new a.mvp.Presenter(b,c,d,e)}},0),{Presenter:b}});